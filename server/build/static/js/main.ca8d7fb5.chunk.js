(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n,c,r=a(0),l=a.n(r),o=a(47),m=a.n(o),s=(a(58),a(11)),u=a(12),i=a(3),E=a(111),p=a(112),f=a(49),d=a(114),b=a(115),h=(a(59),function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(""),o=Object(i.a)(c,2),m=o[0],u=o[1],h=Object(r.useState)(""),j=Object(i.a)(h,2),O=j[0],v=j[1],y=Object(r.useState)(""),g=Object(i.a)(y,2),N=g[0],S=g[1];return l.a.createElement(E.a,null,l.a.createElement(p.a,{className:"justify-content-md-center"},l.a.createElement(f.a,null,l.a.createElement("h1",null,"Create Game"),l.a.createElement(d.a,null,l.a.createElement(d.a.Control,{placeholder:"Room name",type:"text",onChange:function(e){return n(e.target.value)}}),l.a.createElement(d.a.Control,{placeholder:"Master name",type:"text",onChange:function(e){return v(e.target.value)}}),l.a.createElement(s.b,{onClick:function(e){return a?null:e.preventDefault()},to:"/gamemaster?roomName=".concat(a,"&masterName=").concat(O)},l.a.createElement(b.a,{variant:"primary",type:"submit"},"Create game"))))),l.a.createElement(p.a,{className:"justify-content-md-center"},l.a.createElement(f.a,null,l.a.createElement("h1",null,"Join Game"),l.a.createElement(d.a,null,l.a.createElement(d.a.Control,{className:"joinInput",placeholder:"Room name",type:"text",onChange:function(e){return u(e.target.value)}}),l.a.createElement(d.a.Control,{placeholder:"Player name",type:"text",onChange:function(e){return S(e.target.value)}}),l.a.createElement(s.b,{onClick:function(e){return m?null:e.preventDefault()},to:"/gameplayer?joinRoomName=".concat(m,"&playerName=").concat(N)},l.a.createElement(b.a,{variant:"primary",type:"submit"},"Join game"))))))}),j=a(14),O=a(18),v=a.n(O),y=a(19),g=a.n(y),N=(a(103),function(e){var t=e.messages;return l.a.createElement("div",null,t.map((function(e,t){return l.a.createElement("p",{className:"message",key:t},e.text)})))}),S=(a(104),function(e){var t=e.location,a=Object(r.useState)(""),c=Object(i.a)(a,2),o=(c[0],c[1]),m=Object(r.useState)(""),s=Object(i.a)(m,2),u=s[0],p=s[1],f=Object(r.useState)({res:"When at least 2 players are in the room, click Init Game"}),d=Object(i.a)(f,2),h=d[0],O=d[1],y=Object(r.useState)(""),S=Object(i.a)(y,2),C=(S[0],S[1]),k=Object(r.useState)([]),w=Object(i.a)(k,2),R=w[0],G=w[1],I=Object(r.useState)([]),x=Object(i.a)(I,2),A=x[0],P=x[1],T=Object(r.useState)(""),J=Object(i.a)(T,2),M=J[0],q=J[1],D=Object(r.useState)(0),L=Object(i.a)(D,2),Q=L[0],W=L[1],B=Object(r.useState)(!1),U=Object(i.a)(B,2),z=U[0],H=U[1],V=Object(r.useState)(""),Y=Object(i.a)(V,2),_=Y[0],$=Y[1],F=Object(r.useState)([]),K=Object(i.a)(F,2),X=K[0],Z=K[1];Object(r.useEffect)((function(){var e=v.a.parse(t.search),a=e.roomName,c=e.masterName;return n=g.a.connect("localhost:5000"),o(a),p(c),n.emit("createRoom",{roomName:a,masterName:c},(function(e){e&&(H(!0),$(e),console.log(e))})),n.on("playerData",(function(e){Z(e)})),function(){n.emit("disconnect"),n.disconnect()}}),["localhost:5000",t.search]),Object(r.useEffect)((function(){n.on("message",(function(e){C(e)})),n.on("message",(function(e){G([].concat(Object(j.a)(R),[e]))}))}),[R]);Object(r.useEffect)((function(){n.on("initGame",(function(){W(0);fetch("https://opentdb.com/api.php?amount=4&type=multiple&encode=url3986").then((function(e){return e.json()})).then((function(e){P(e.results),ee(e.results)}))}))}),[]);var ee=function(e){var t=e[Q].question,a=e[Q].incorrect_answers,c=e[Q].correct_answer,r=Object(j.a)(a),l=3*Math.random(),o=Math.floor(l)+1;r.splice(o-1,0,c),q(c),W((function(e){return e+1}));var m=Q+1;n.emit("showQuestion",{gameQuestion:t,gameOptionsArray:r,gameRound:m})};return Object(r.useEffect)((function(){n.on("playerChoice",(function(e,t,a){a===Q&&(t===decodeURIComponent(M)&&(console.log(e,"has answered CORRECTLY:",t),n.emit("updateScore",e)),n.emit("correctAnswer",M,e)),O({res:"When all players has answered, click Next question"})}))}),[Q]),l.a.createElement(E.a,null,l.a.createElement("div",{className:"wrapper"},!0===z?l.a.createElement("div",{className:"errorMsg"},l.a.createElement("p",null,_.error),l.a.createElement("a",{href:"/"},"Go back")):l.a.createElement("div",null,l.a.createElement("h2",null,"Hello, Game Master ",u,"!"),l.a.createElement("div",{className:"serverRes"},l.a.createElement("strong",null,h.res)),l.a.createElement("div",{className:"button-container"},l.a.createElement(b.a,{variant:"primary",size:"md",onClick:function(){n.emit("ready",(function(e){O(e)}))}},"Init Game"),l.a.createElement(b.a,{variant:"primary",size:"md",onClick:function(){Q!==A.length?ee(A):(n.emit("endGame"),O({res:"Game has ended! If you want to play again, click Init Game"}))}},"Next question")),l.a.createElement("div",{className:"players-container"},l.a.createElement("h3",null,"Players in room"),l.a.createElement("hr",null),X.map((function(e,t){return l.a.createElement("p",{className:"p-players",key:t},"Playername: ",e.username)}))),l.a.createElement("div",{className:"messages-container"},l.a.createElement("h3",null,"Activity"),l.a.createElement("hr",null),l.a.createElement(N,{messages:R})),l.a.createElement("a",{href:"/"},"Leave room"))))}),C=(a(105),function(e){var t=e.currentQuestion,a=e.currentOptions,n=e.currentRound,c=e.playerName,o=e.socket,m=e.clickStatus,s=e.onClickChange,u=e.correctAnswer,E=Object(r.useState)(""),p=Object(i.a)(E,2),f=p[0],d=p[1],b=Object(r.useState)(m),h=Object(i.a)(b,2),j=(h[0],h[1]),O=function(e){var t=e.target.innerText,a=n;o.emit("playerChoice",{playerName:c,choice:t,gameRound:a},(function(){console.log("player name",c,"choice",f)})),d(t),j(!1),s(!1)};return l.a.createElement("div",null,l.a.createElement("div",{className:"round-container"},l.a.createElement("h2",null,"Question ",n)),!0===m?l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"question-container"},l.a.createElement("h2",null,decodeURIComponent(t.question))),l.a.createElement("div",{className:"options-container"},a.map((function(e,t){return l.a.createElement("div",{className:"option",key:t,onClick:O},decodeURIComponent(e))})))):l.a.createElement("div",null,l.a.createElement("h3",{className:"h3-chosen-option"},"You chose: ",f),l.a.createElement("p",{className:"correct-answer"},"Correct answer is: ",decodeURIComponent(u))))}),k=a(113),w=(a(106),function(e){var t=e.players,a=e.player,n=Object(u.f)();return l.a.createElement(E.a,null,l.a.createElement("div",null,l.a.createElement("h2",null,"The game has ended!"),l.a.createElement("div",{className:"score-container"},l.a.createElement("h3",null,"Game scores"),l.a.createElement(k.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Player name"),l.a.createElement("th",null,"Score"))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.username),l.a.createElement("td",null,e.score))}))))),l.a.createElement("div",{className:"save-score-container"},l.a.createElement("h3",null,"Save score to leaderboard"),l.a.createElement("p",null,"If you want to play again in the same room, don't save your score!"),l.a.createElement(d.a,{onSubmit:function(e){e.preventDefault(),fetch("http://localhost:5000/scores/save",{method:"POST",body:JSON.stringify({username:a.username,score:a.score}),headers:{"Content-Type":"application/json",Accept:"applicaton/json"}}).then((function(e){200===e.status&&(console.log("Score has been saved"),n.push("/leaderboard"))}))},method:"POST"},l.a.createElement("input",{disabled:!0,readOnly:!0,defaultValue:a.username,className:"form-control"}),l.a.createElement("input",{disabled:!0,readOnly:!0,defaultValue:a.score,className:"form-control"}),l.a.createElement(b.a,{variant:"primary",type:"submit"},"Save score"))),l.a.createElement("a",{href:"/"},"Leave room")))}),R=function(e){var t=e.location,a=Object(r.useState)(""),n=Object(i.a)(a,2),o=(n[0],n[1]),m=Object(r.useState)(""),s=Object(i.a)(m,2),u=s[0],p=s[1],f=Object(r.useState)(!1),d=Object(i.a)(f,2),b=d[0],h=d[1],O=Object(r.useState)(""),y=Object(i.a)(O,2),S=y[0],k=y[1],R=Object(r.useState)(""),G=Object(i.a)(R,2),I=(G[0],G[1]),x=Object(r.useState)([]),A=Object(i.a)(x,2),P=A[0],T=A[1],J=Object(r.useState)([]),M=Object(i.a)(J,2),q=M[0],D=M[1],L=Object(r.useState)(!1),Q=Object(i.a)(L,2),W=Q[0],B=Q[1],U=Object(r.useState)(""),z=Object(i.a)(U,2),H=z[0],V=z[1],Y=Object(r.useState)([]),_=Object(i.a)(Y,2),$=_[0],F=_[1],K=Object(r.useState)(0),X=Object(i.a)(K,2),Z=X[0],ee=X[1],te=Object(r.useState)(""),ae=Object(i.a)(te,2),ne=ae[0],ce=ae[1],re=Object(r.useState)(!0),le=Object(i.a)(re,2),oe=le[0],me=le[1],se=Object(r.useState)([]),ue=Object(i.a)(se,2),ie=ue[0],Ee=ue[1],pe=Object(r.useState)(!1),fe=Object(i.a)(pe,2),de=fe[0],be=fe[1],he=Object(r.useState)(""),je=Object(i.a)(he,2),Oe=je[0],ve=je[1];Object(r.useEffect)((function(){var e=v.a.parse(t.search),a=e.joinRoomName,n=e.playerName;return c=g.a.connect("localhost:5000"),o(a),p(n),c.emit("joinRoom",{joinRoomName:a,playerName:n},(function(e){e&&(h(!0),k(e),console.log(e))})),c.on("playerData",(function(e){D(e)})),function(){c.emit("disconnect"),c.disconnect()}}),["localhost:5000"]),Object(r.useEffect)((function(){c.on("message",(function(e){I(e)})),c.on("message",(function(e){T([].concat(Object(j.a)(P),[e]))}))}),[P]),Object(r.useEffect)((function(){c.on("currentRound",(function(e,t,a){V(e),F(t),ee(a),ce(""),B(!0),be(!1),me(!0)}))}),[]);return Object(r.useEffect)((function(){c.on("correctAnswer",(function(e){ce(e)}))}),[]),Object(r.useEffect)((function(){c.on("scores",(function(e){Ee(e),be(!0)})),c.on("finalPlayerInfo",(function(e){ve(e)}))}),[]),l.a.createElement(E.a,null,l.a.createElement("div",{className:"wrapper"},!0===b?l.a.createElement("div",{className:"errorMsg"},l.a.createElement("p",null,S.error),l.a.createElement("a",{href:"/"},"Go back")):l.a.createElement("div",null,!1===W?l.a.createElement("div",null,l.a.createElement("h2",null,"Hello, Game player ",u,"!"),l.a.createElement("p",null,l.a.createElement("strong",null,"Waiting for game master to start the game...")),l.a.createElement("div",{className:"players-container"},l.a.createElement("h3",null,"Players in room"),l.a.createElement("hr",null),q.map((function(e,t){return l.a.createElement("p",{className:"p-players",key:t},"Playername: ",e.username)}))),l.a.createElement("div",{className:"messages-container"},l.a.createElement("h3",null,"Activity"),l.a.createElement("hr",null),l.a.createElement(N,{messages:P})),l.a.createElement("a",{href:"/"},"Leave room")):l.a.createElement("div",null,!1===de?l.a.createElement(C,{currentQuestion:H,currentOptions:$,currentRound:Z,playerName:u,socket:c,clickStatus:oe,onClickChange:function(e){me(e)},correctAnswer:ne}):l.a.createElement(w,{players:ie,player:Oe})))))},G=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){fetch("http://localhost:5000/scores/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"applicaton/json"}}).then((function(e){return e.json()})).then((function(e){n(e)}))}),[]),l.a.createElement(E.a,null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("h1",null,"Leaderboard"),l.a.createElement("h3",null,"Top 20"),l.a.createElement(k.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Player name"),l.a.createElement("th",null,"Score"))),l.a.createElement("tbody",null,a.map((function(e,t){return l.a.createElement("tr",{className:"leaderboard-container",key:t},l.a.createElement("td",null,e.username),l.a.createElement("td",null,e.score))})))),l.a.createElement("a",{href:"/"},"Join a new game")))},I=(a(107),a(52)),x=a.n(I);function A(){return l.a.createElement("header",{className:"navBar-header"},l.a.createElement("div",{className:"navBar-items"},l.a.createElement(s.c,{to:"/"},l.a.createElement("img",{className:"logo",src:x.a,alt:"logo"}))))}a(108),a(109);var P=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(s.a,null,l.a.createElement(A,null),l.a.createElement("main",null,l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/",exact:!0,component:h}),l.a.createElement(u.a,{path:"/gamemaster",component:S}),l.a.createElement(u.a,{path:"/gameplayer",component:R}),l.a.createElement(u.a,{path:"/leaderboard",component:G})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(l.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},52:function(e,t,a){e.exports=a.p+"static/media/trivia.8c9210ab.png"},53:function(e,t,a){e.exports=a(110)},58:function(e,t,a){},59:function(e,t,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.ca8d7fb5.chunk.js.map